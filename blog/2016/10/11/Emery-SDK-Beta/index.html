<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>4.2-beta4 SDK - Emery Edition! // Pebble Developers</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="description" content="The official developer website for the Pebble smartwatch.">
  <link rel="canonical" href="http://developer.getpebble.com/blog/2016/10/11/Emery-SDK-Beta/">
  <link href="//fonts.googleapis.com/css?family=Open+Sans:400italic,400,300,600,700" rel="stylesheet" type="text/css">
  <link href="//fonts.googleapis.com/css?family=Inconsolata:400,700" rel="stylesheet" type="text/css">
  <link href="/developer.pebble.com/assets/favicon.png" rel="shortcut icon" type="image/vnd.microsoft.icon" id="favicon">
  <link rel="stylesheet" type="text/css" href="/developer.pebble.com/assets/css/main.css">

  <noscript>
  <link rel="stylesheet" type="text/css" href="/developer.pebble.com/assets/css/noscript.css">
  </noscript>

  <script type="text/javascript" >
    var _rollbarConfig = {
      accessToken: 'e1ecd52de5ba46c88e9f6f346a954c62',
      captureUncaught: true,
      payload: {
        environment: 'production'
      }
    };
    !function(a,b){function c(b){this.shimId=++h,this.notifier=null,this.parentShim=b,this.logger=function(){},a.console&&void 0===a.console.shimId&&(this.logger=a.console.log)}function d(b,c,d){a._rollbarWrappedError&&(d[4]||(d[4]=a._rollbarWrappedError),d[5]||(d[5]=a._rollbarWrappedError._rollbarContext),a._rollbarWrappedError=null),b.uncaughtError.apply(b,d),c&&c.apply(a,d)}function e(b){var d=c;return g(function(){if(this.notifier)return this.notifier[b].apply(this.notifier,arguments);var c=this,e="scope"===b;e&&(c=new d(this));var f=Array.prototype.slice.call(arguments,0),g={shim:c,method:b,args:f,ts:new Date};return a._rollbarShimQueue.push(g),e?c:void 0})}function f(a,b){if(b.hasOwnProperty&&b.hasOwnProperty("addEventListener")){var c=b.addEventListener;b.addEventListener=function(b,d,e){c.call(this,b,a.wrap(d),e)};var d=b.removeEventListener;b.removeEventListener=function(a,b,c){d.call(this,a,b&&b._wrapped?b._wrapped:b,c)}}}function g(a,b){return b=b||this.logger,function(){try{return a.apply(this,arguments)}catch(c){b("Rollbar internal error:",c)}}}var h=0;c.init=function(a,b){var e=b.globalAlias||"Rollbar";if("object"==typeof a[e])return a[e];a._rollbarShimQueue=[],a._rollbarWrappedError=null,b=b||{};var h=new c;return g(function(){if(h.configure(b),b.captureUncaught){var c=a.onerror;a.onerror=function(){var a=Array.prototype.slice.call(arguments,0);d(h,c,a)};var g,i,j="EventTarget,Window,Node,ApplicationCache,AudioTrackList,ChannelMergerNode,CryptoOperation,EventSource,FileReader,HTMLUnknownElement,IDBDatabase,IDBRequest,IDBTransaction,KeyOperation,MediaController,MessagePort,ModalWindow,Notification,SVGElementInstance,Screen,TextTrack,TextTrackCue,TextTrackList,WebSocket,WebSocketWorker,Worker,XMLHttpRequest,XMLHttpRequestEventTarget,XMLHttpRequestUpload".split(",");for(g=0;g<j.length;++g)i=j[g],a[i]&&a[i].prototype&&f(h,a[i].prototype)}return a[e]=h,h},h.logger)()},c.prototype.loadFull=function(a,b,c,d,e){var f=g(function(){var a=b.createElement("script"),e=b.getElementsByTagName("script")[0];a.src=d.rollbarJsUrl,a.async=!c,a.onload=h,e.parentNode.insertBefore(a,e)},this.logger),h=g(function(){var b;if(void 0===a._rollbarPayloadQueue){var c,d,f,g;for(b=new Error("rollbar.js did not load");c=a._rollbarShimQueue.shift();)for(f=c.args,g=0;g<f.length;++g)if(d=f[g],"function"==typeof d){d(b);break}}"function"==typeof e&&e(b)},this.logger);g(function(){c?f():a.addEventListener?a.addEventListener("load",f,!1):a.attachEvent("onload",f)},this.logger)()},c.prototype.wrap=function(b,c){try{var d;if(d="function"==typeof c?c:function(){return c||{}},"function"!=typeof b)return b;if(b._isWrap)return b;if(!b._wrapped){b._wrapped=function(){try{return b.apply(this,arguments)}catch(c){throw c._rollbarContext=d(),c._rollbarContext._wrappedSource=b.toString(),a._rollbarWrappedError=c,c}},b._wrapped._isWrap=!0;for(var e in b)b.hasOwnProperty(e)&&(b._wrapped[e]=b[e])}return b._wrapped}catch(f){return b}};for(var i="log,debug,info,warn,warning,error,critical,global,configure,scope,uncaughtError".split(","),j=0;j<i.length;++j)c.prototype[i[j]]=e(i[j]);var k="//d37gvrvc0wt4s1.cloudfront.net/js/v1.1/rollbar.min.js";_rollbarConfig.rollbarJsUrl=_rollbarConfig.rollbarJsUrl||k;var l=c.init(a,_rollbarConfig);l.loadFull(a,b,!1,_rollbarConfig)}(window,document);
  </script>
  <script type="text/javascript" async>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-30638158-4', 'auto');
    ga('send', 'pageview');
  </script>

</head>
<body class="">
  <div class="mmenu__wrapper">
    <div class="sidebar__wrapper">
  <div class="sidebar sidebar--narrow">
    <a href="/" class="sidebar__header">
      <span>pebble</span>
    </a>
    <ul class="mainmenu">
      <li class="mainmenu__item mainmenu__item--getting-started"><a href="/tutorials/"><span>Tutorials</span></a></li>
<li class="mainmenu__item mainmenu__item--sdk"><a href="/sdk/"><span>Get the SDK</span></a></li>
<li class="mainmenu__item mainmenu__item--guides"><a href="/guides/"><span>Guides</span></a></li>
<li class="mainmenu__item mainmenu__item--docs"><a href="/docs/"><span>Documentation</span></a></li>
<li class="mainmenu__item mainmenu__item--examples"><a href="/examples/"><span>Examples</span></a></li>
<li class="mainmenu__item mainmenu__item--community"><a href="/community/"><span>Community</span></a></li>
<li class="mainmenu__item mainmenu__item--blog active"><a href="/blog/"><span>Blog</span></a></li>
<li class="mainmenu__item mainmenu__item--more"><a href="/more/"><span>More</span></a></li>

    </ul>
    <div class="sidebar__legal">
      <a href="https://www.pebble.com/legal/privacy/" target="_blank">Privacy</a>
      <br>
      <a href="https://www.pebble.com/legal/cookies/" target="_blank">Cookies</a>
    </div>
    <a href="https://dev-portal.getpebble.com/" target="_blank" class="sidebar__footer">Publish</a>
  </div>
</div><!-- sidebar__wrapper -->
<div class="content">
  <div class="search">
  <a  href="javascript:void(0);" class="mobile-nav__hamburger js-mobile-nav-toggle"><i class="fa fa-reorder"></i></a>
  <i class="fa fa-lg fa-search search__icon"></i><input type="search" id="quicksearch" placeholder="Search Developer Site">
</div>
<div class="quicksearch" style="display: none;" id="quicksearch__results"></div>
<div id="search__blackout" style="display: none;"></div>

  <div class="container">
  <div class="row">
    <div class="col-l-8">

<div class="visible-m visible-s visible-xs row">
  <div class="col-xs-12">
    <div class="form__group">
      <div class="select-style no-label">
        <select class="js-toc-select">

            <option value="all-about-those-pixels">All About Those Pixels</option>

            <option value="introducing-the-contentsize-api">Introducing the ContentSize API</option>

            <option value="new-for-rocky-js">New for Rocky.js</option>

            <option value="memory-pressure">- Memory Pressure</option>

            <option value="userpreferences">- UserPreferences</option>

            <option value="what-39-s-next">What&#39;s Next</option>

        </select>
      </div>
    </div>
  </div>
</div>


      <div class="hidden-l">
        <div class="row" style="margin-bottom: 0.5em;">
    <div class="col-xs-6">
        <a href="/feed.xml" class="btn btn--blog btn--wide btn--small btn--square"><i class="fa fa-rss fa-lg"></i> Get Updates</a>
    </div>
    <div class="col-xs-6">
        <a href="https://twitter.com/pebbledev/" class="btn btn--blog btn--wide btn--small btn--square"><i class="fa fa-twitter fa-lg"></i> Follow Us</a>
    </div>
</div>
<div class="row" style="margin-bottom: 0.5em;">
    <div class="col-l-12">
        <a href="javascript:void();" data-modal-target="#modal-newsletter" data-modal-fit-viewport="false" class="btn btn--small btn--blog--alt btn--wide btn--square"><i class="fa fa-envelope-o fa-lg"></i> Subscribe to the Newsletter</a>
    </div>
</div>

      </div>
      <h1 class="pagetitle">4.2-beta4 SDK - Emery Edition!</h1>
<div class="markdown markdown--staff">
<div class="blog__meta">
  <ul class="inline-list inline-list--piped">
    <li>11 October 2016</li>
    <li><a href="/blog/authors/jonb/">Jon Barlow</a></li>

    <li>

        <a href="/blog/tags/freshly-baked/">Freshly Baked</a>

    </li>
    <li><a href="/blog/2016/10/11/Emery-SDK-Beta/#comments">Comments</a></li>

  </ul>
</div>

<p>We&#39;re incredibly excited to announce the first public beta of the Pebble SDK
4.2. This is the first time that developers can experience the new &#39;Emery&#39;
platform which is specifically created for the upcoming
<a href="https://www.pebble.com/buy-pebble-time-2-smartwatch" title="" class="">Pebble Time 2</a>.</p><p><img src="/developer.pebble.com/assets/images/blog/2016-10-11-intro.jpg" alt="Pebble Time 2" /></p><h2 id="all-about-those-pixels" class="anchor">All About Those Pixels</h2><p>The new display on the <em>Pebble Time 2</em> is almost 53% physically larger, and the
<a href="https://en.wikipedia.org/wiki/Pixel_density" title="" class="">Pixels per inch</a> (PPI) has been
increased from 182 PPI to 202 PPI. This is a massive 200x228 pixels, compared to
144x168 on the <em>Pebble Time Steel</em>, that&#39;s an 88% increase in the total amount
of pixels!.</p><p>Take a look at our
<a href="/guides/tools-and-resources/hardware-information/"><em>Hardware guide</em></a> for
further information about the specifications of the Pebble Time 2.</p><p>Watchfaces and watchapps that have not been updated for the Emery platform will
run in <em>Bezel Mode</em>. This means they will appear centered on screen at their
original resolution (144x168), but due to the change in PPI, they appear
slightly smaller.</p><p><img src="/developer.pebble.com/assets/images/blog/2016-10-11-bezel.png" alt="Pebble Time 2 Bezel" />
<p class="blog__image-text">Left: Pebble Time Steel, Middle: Pebble Time 2 -
Bezel Mode, Right: Optimized for Pebble Time 2.<br />
<a href="https://github.com/pebble-examples/concentricity">Concentricity
Watchface</a></p></p><p>The increased number of pixels would immediately make you think that you can
just add more elements to your watchface design, but due to the increase in PPI,
existing elements and fonts may feel slightly smaller than expected when viewed
on an actual device.</p><p>The image below simulates how the PPI difference makes a bezel mode application
feel smaller on the Pebble Time 2.</p><p><img src="/developer.pebble.com/assets/images/blog/2016-10-11-dpi-comparison.png" alt="Pebble Time 2 PPI" />
<p class="blog__image-text">Left: Pebble Time Steel, Right: Pebble Time 2 - Bezel Mode.</p></p><p>We&#39;ve now seen that the increased amount of pixels doesn&#39;t necessarily equate to
bigger text on our devices, due to the change in PPI, that&#39;s why we&#39;ve created
the new <a href="/docs/c/preview/User_Interface/Preferences/#preferred_content_size" title="" class="">ContentSize</a>
API.</p><h2 id="introducing-the-contentsize-api" class="anchor">Introducing the ContentSize API</h2><p>All existing Pebble smartwatches provide the ability for users to change the
size of text for notifications and some system UI components using <em>Settings &gt;
Notifications &gt; Text Size</em>.</p><p>The new
<a href="/docs/c/preview/User_Interface/Preferences/#preferred_content_size" title="" class="">ContentSize</a>
API now exposes this setting to developers, in order for
them to adapt their application design and layout based on this user preference.</p><p>In the previous section, we saw how the PPI increase on Pebble Time 2 affected
the relative size of a watchface. In the image below you can see precisely how
text sizes are affected by the PPI change.</p><p><img src="/developer.pebble.com/assets/images/blog/2016-10-11-contentsize.png" alt="Pebble Time 2 ContentSize" />
<p class="blog__image-text">Yellow: Pebble Time Steel, Green: Pebble Time 2.</p></p><p>To negate the effects of this reduced font size, the Emery platform uses larger
fonts by default. Developers can use the
<a href="/docs/c/preview/User_Interface/Preferences/#preferred_content_size" title="" class="">ContentSize</a>
API to match this
behaviour within their own applications.</p><p>The following table explains how the text size setting affects the content size
on each platform:</p>
<table><thead>
<tr>
<th>Platform</th>
<th>Text Size: Small</th>
<th>Text Size: Medium</th>
<th>Text Size: Large</th>
</tr>
</thead><tbody>
<tr>
<td>Aplite, Basalt, Chalk, Diorite</td>
<td>ContentSize: Small</td>
<td>ContentSize: Medium</td>
<td>ContentSize: Large</td>
</tr>
<tr>
<td>Emery</td>
<td>ContentSize: Medium</td>
<td>ContentSize: Large</td>
<td>ContentSize: Extra Large</td>
</tr>
</tbody></table>
<p>Developers should aim to implement designs which adapt to the capabilities of
the device, but also the accessibility requirements of the user. The
<a href="/docs/c/preview/User_Interface/Preferences/#preferred_content_size" title="" class="">ContentSize</a>
API satisfies both of these goals.</p><p>For more information, read the
<a href="/guides/user-interfaces/content-size/"><em>ContentSize guide</em></a>.</p><h2 id="new-for-rocky-js" class="anchor">New for Rocky.js</h2><p>With the release of SDK 4.2, we&#39;re extremely proud to announce that
<a href="/docs/rockyjs/" title="" class="">Rocky.js</a> watchfaces can be published into the Pebble appstore!
As usual, don&#39;t publish apps with the beta SDK into the appstore, please wait
for the final release.</p><p>In addition to finalizing the memory contract for Rocky.js apps, we&#39;ve also
added a few new APIs to work with:</p><h3 id="memory-pressure" class="anchor">Memory Pressure</h3><p>The <code>memorypressure</code> event has been added to allow developers to handle the
situations which occur when the amount of memory available to their application
has changed. Initially we&#39;ve only implemented the <code>high</code> memory pressure level,
which occurs right before your application is about to be terminated, due to a
lack of memory. If you can free sufficient memory within the callback for this
event, your application will continue to run. Please refer to the Rocky.js
<a href="/docs/rockyjs/rocky/#RockyMemoryPressureCallback" title="" class="">documentation</a> and the memory
pressure <a href="https://github.com/pebble-examples/rocky-memorypressure" title="" class="">example application</a>.</p><h3 id="userpreferences" class="anchor">UserPreferences</h3><p>The first watchface setting exposed in the new <code>UserPreferences</code> object is
<code>contentSize</code>. This exposes the new
<a href="/docs/c/preview/User_Interface/Preferences/#preferred_content_size" title="" class="">ContentSize</a>
API to Rocky.js watchface
developers. Find out more in the Rocky.js
<a href="/docs/rockyjs/rocky/#userPreferences" title="" class="">UserPreferences documentation</a>.</p><h2 id="what-39-s-next" class="anchor">What&#39;s Next</h2><p>Check out the <a href="/sdk/changelogs/4.2-beta4/" title="" class="">release notes</a> for a full list of
changes and fixes that were included in SDK 4.2-beta4.</p><p>Let us know on <a href="https://twitter.com/pebbledev/" title="" class="">Twitter</a> if you built something
cool using the new APIs! We&#39;d love to hear about your experiences with the SDK.</p><p>Happy Hacking!</p><p>Team Pebble</p>
<hr>
<a id="comments" class="anchor"></a>
<div id="disqus_thread" aria-live="polite" data-post-url="https://developer.getpebble.com/blog/2016/10/11/Emery-SDK-Beta/">
  You need JavaScript enabled to read and post comments.
</div>
</div>

    </div>
    <div class="col-l-4">

      <div class="gray-box gray-box--fixed gray-box--scrollspy">
        <div class="row" style="margin-bottom: 0.5em;">
    <div class="col-xs-6">
        <a href="/feed.xml" class="btn btn--blog btn--wide btn--small btn--square"><i class="fa fa-rss fa-lg"></i> Get Updates</a>
    </div>
    <div class="col-xs-6">
        <a href="https://twitter.com/pebbledev/" class="btn btn--blog btn--wide btn--small btn--square"><i class="fa fa-twitter fa-lg"></i> Follow Us</a>
    </div>
</div>
<div class="row" style="margin-bottom: 0.5em;">
    <div class="col-l-12">
        <a href="javascript:void();" data-modal-target="#modal-newsletter" data-modal-fit-viewport="false" class="btn btn--small btn--blog--alt btn--wide btn--square"><i class="fa fa-envelope-o fa-lg"></i> Subscribe to the Newsletter</a>
    </div>
</div>



  <h3>Overview</h3>
  <ul class="toc">

      <li class="toc__item toc__item--level1"><a href="#all-about-those-pixels">All About Those Pixels</a></li>

      <li class="toc__item toc__item--level1"><a href="#introducing-the-contentsize-api">Introducing the ContentSize API</a></li>

      <li class="toc__item toc__item--level1"><a href="#new-for-rocky-js">New for Rocky.js</a></li>

      <li class="toc__item toc__item--level2"><a href="#memory-pressure">Memory Pressure</a></li>

      <li class="toc__item toc__item--level2"><a href="#userpreferences">UserPreferences</a></li>

      <li class="toc__item toc__item--level1"><a href="#what-39-s-next">What&#39;s Next</a></li>

  </ul>

        <h3>Categories</h3>
        <ul>
            <li>
              <a href="/blog/">

                All Posts

              </a>
            </li>


            <li>
              <a href="/blog/tags/makeawesomehappen/">

                #makeawesomehappen

              </a>
            </li>

            <li>
              <a href="/blog/tags/at-the-pub/">

                At the Pub

              </a>
            </li>

            <li>
              <a href="/blog/tags/beautiful-code/">

                Beautiful Code

              </a>
            </li>

            <li>
              <a href="/blog/tags/cloudpebble/">

                CloudPebble

              </a>
            </li>

            <li>
              <a href="/blog/tags/down-the-rabbit-hole/">

                Down the Rabbit Hole

              </a>
            </li>

            <li>
              <a href="/blog/tags/freshly-baked/">

                <strong>Freshly Baked</strong>

              </a>
            </li>

            <li>
              <a href="/blog/tags/timeline/">

                Timeline

              </a>
            </li>

        </ul>

        <h3>Authors</h3>
        <ul>


            <li>
              <a href="/blog/authors/thomas/">

                Thomas Sarlandie

              </a>
            </li>

            <li>
              <a href="/blog/authors/niharika/">

                Niharika Bedekar

              </a>
            </li>

            <li>
              <a href="/blog/authors/katharine/">

                Katharine Berry

              </a>
            </li>

            <li>
              <a href="/blog/authors/jonb/">

                <strong>Jon Barlow</strong>

              </a>
            </li>

            <li>
              <a href="/blog/authors/cherie/">

                Cherie Williams

              </a>
            </li>

            <li>
              <a href="/blog/authors/chrislewis/">

                Chris Lewis

              </a>
            </li>

            <li>
              <a href="/blog/authors/pebble/">

                Team Pebble

              </a>
            </li>

            <li>
              <a href="/blog/authors/katherine/">

                Katherine McAuliffe

              </a>
            </li>

            <li>
              <a href="/blog/authors/cat/">

                Cat Haines

              </a>
            </li>

            <li>
              <a href="/blog/authors/alex/">

                Alex Lin

              </a>
            </li>

            <li>
              <a href="/blog/authors/kirby/">

                Kirby Kohlmorgen

              </a>
            </li>

            <li>
              <a href="/blog/authors/brad/">

                Brad Murray

              </a>
            </li>

            <li>
              <a href="/blog/authors/alexey/">

                Alexey Komissarouk

              </a>
            </li>

            <li>
              <a href="/blog/authors/lukasz/">

                Łukasz Zalewski

              </a>
            </li>

            <li>
              <a href="/blog/authors/tom/">

                Tom Maremaa

              </a>
            </li>

            <li>
              <a href="/blog/authors/ryan/">

                Ryan Case

              </a>
            </li>

            <li>
              <a href="/blog/authors/rperryng/">

                Ryan Perry-Nguyen

              </a>
            </li>

            <li>
              <a href="/blog/authors/keegan/">

                Keegan Lillo

              </a>
            </li>

            <li>
              <a href="/blog/authors/meiguro/">

                Meiguro

              </a>
            </li>

        </ul>
      </div>
    </div>
  </div>
</div>
<div id="modal-newsletter" class="hidden">
  <h3>Subscribe to the Pebble Developers Newsletter</h3>
<form action="//getpebble.us2.list-manage.com/subscribe/post?u=dd6d54b0e22472d9f5004013a&amp;id=9548e2c0aa" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
  <div id="mce-responses">
    <div class="alert alert--error" id="mce-error-response" style="display:none"></div>
    <div class="alert alert--success" id="mce-success-response" style="display:none"></div>
  </div>
  <div class="form__group">
    <label for="mce-EMAIL">Email Address </label>
    <input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL">
  </div>
  <div style="position: absolute; left: -5000px;">
    <input type="text" name="b_dd6d54b0e22472d9f5004013a_9548e2c0aa" tabindex="-1" value="">
  </div>
  <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="btn btn--bg-lightblue btn--fg-white btn--wide btn--large">
</form>
<script type='text/javascript' src='//s3.amazonaws.com/downloads.mailchimp.com/js/mc-validate.js'></script><script type='text/javascript'>(function($) {window.fnames = new Array(); window.ftypes = new Array();fnames[0]='EMAIL';ftypes[0]='email';fnames[1]='FNAME';ftypes[1]='text';fnames[2]='LNAME';ftypes[2]='text';fnames[4]='MMERGE4';ftypes[4]='text';fnames[3]='MMERGE3';ftypes[3]='text';fnames[5]='MMERGE5';ftypes[5]='text';}(jQuery));var $mcj = jQuery.noConflict(true);</script>

</div>

</div>

  </div>
  <script type="text/javascript">
    var searchPrimary = '';
  </script>

  <script type="text/javascript" src="/developer.pebble.com/assets/js/libs-ce98da7b5eecc97f976a3cad8e665a31.js"></script>

  <script type="text/javascript" src="/developer.pebble.com/assets/js/templates.js"></script>
  <script type="text/javascript" src="/developer.pebble.com/assets/js/app.js"></script>
  <script type="text/javascript" src="/developer.pebble.com/assets/js/search.js"></script>
  <script type="text/javascript" src="/developer.pebble.com/assets/js/quicksearch.js"></script>
  <script type="text/javascript" src="/developer.pebble.com/assets/js/disqus.js"></script>

</body>
</html>
