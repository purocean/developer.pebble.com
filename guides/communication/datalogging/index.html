<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Datalogging // Pebble Developers</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="description" content="Information on how to collect data batches using the Datalogging API.
">
  <link rel="canonical" href="http://developer.getpebble.com/guides/communication/datalogging/">
  <link href="//fonts.googleapis.com/css?family=Open+Sans:400italic,400,300,600,700" rel="stylesheet" type="text/css">
  <link href="//fonts.googleapis.com/css?family=Inconsolata:400,700" rel="stylesheet" type="text/css">
  <link href="/developer.pebble.com/assets/favicon.png" rel="shortcut icon" type="image/vnd.microsoft.icon" id="favicon">
  <link rel="stylesheet" type="text/css" href="/developer.pebble.com/assets/css/main.css">

  <noscript>
  <link rel="stylesheet" type="text/css" href="/developer.pebble.com/assets/css/noscript.css">
  </noscript>

  <script type="text/javascript" >
    var _rollbarConfig = {
      accessToken: 'e1ecd52de5ba46c88e9f6f346a954c62',
      captureUncaught: true,
      payload: {
        environment: 'production'
      }
    };
    !function(a,b){function c(b){this.shimId=++h,this.notifier=null,this.parentShim=b,this.logger=function(){},a.console&&void 0===a.console.shimId&&(this.logger=a.console.log)}function d(b,c,d){a._rollbarWrappedError&&(d[4]||(d[4]=a._rollbarWrappedError),d[5]||(d[5]=a._rollbarWrappedError._rollbarContext),a._rollbarWrappedError=null),b.uncaughtError.apply(b,d),c&&c.apply(a,d)}function e(b){var d=c;return g(function(){if(this.notifier)return this.notifier[b].apply(this.notifier,arguments);var c=this,e="scope"===b;e&&(c=new d(this));var f=Array.prototype.slice.call(arguments,0),g={shim:c,method:b,args:f,ts:new Date};return a._rollbarShimQueue.push(g),e?c:void 0})}function f(a,b){if(b.hasOwnProperty&&b.hasOwnProperty("addEventListener")){var c=b.addEventListener;b.addEventListener=function(b,d,e){c.call(this,b,a.wrap(d),e)};var d=b.removeEventListener;b.removeEventListener=function(a,b,c){d.call(this,a,b&&b._wrapped?b._wrapped:b,c)}}}function g(a,b){return b=b||this.logger,function(){try{return a.apply(this,arguments)}catch(c){b("Rollbar internal error:",c)}}}var h=0;c.init=function(a,b){var e=b.globalAlias||"Rollbar";if("object"==typeof a[e])return a[e];a._rollbarShimQueue=[],a._rollbarWrappedError=null,b=b||{};var h=new c;return g(function(){if(h.configure(b),b.captureUncaught){var c=a.onerror;a.onerror=function(){var a=Array.prototype.slice.call(arguments,0);d(h,c,a)};var g,i,j="EventTarget,Window,Node,ApplicationCache,AudioTrackList,ChannelMergerNode,CryptoOperation,EventSource,FileReader,HTMLUnknownElement,IDBDatabase,IDBRequest,IDBTransaction,KeyOperation,MediaController,MessagePort,ModalWindow,Notification,SVGElementInstance,Screen,TextTrack,TextTrackCue,TextTrackList,WebSocket,WebSocketWorker,Worker,XMLHttpRequest,XMLHttpRequestEventTarget,XMLHttpRequestUpload".split(",");for(g=0;g<j.length;++g)i=j[g],a[i]&&a[i].prototype&&f(h,a[i].prototype)}return a[e]=h,h},h.logger)()},c.prototype.loadFull=function(a,b,c,d,e){var f=g(function(){var a=b.createElement("script"),e=b.getElementsByTagName("script")[0];a.src=d.rollbarJsUrl,a.async=!c,a.onload=h,e.parentNode.insertBefore(a,e)},this.logger),h=g(function(){var b;if(void 0===a._rollbarPayloadQueue){var c,d,f,g;for(b=new Error("rollbar.js did not load");c=a._rollbarShimQueue.shift();)for(f=c.args,g=0;g<f.length;++g)if(d=f[g],"function"==typeof d){d(b);break}}"function"==typeof e&&e(b)},this.logger);g(function(){c?f():a.addEventListener?a.addEventListener("load",f,!1):a.attachEvent("onload",f)},this.logger)()},c.prototype.wrap=function(b,c){try{var d;if(d="function"==typeof c?c:function(){return c||{}},"function"!=typeof b)return b;if(b._isWrap)return b;if(!b._wrapped){b._wrapped=function(){try{return b.apply(this,arguments)}catch(c){throw c._rollbarContext=d(),c._rollbarContext._wrappedSource=b.toString(),a._rollbarWrappedError=c,c}},b._wrapped._isWrap=!0;for(var e in b)b.hasOwnProperty(e)&&(b._wrapped[e]=b[e])}return b._wrapped}catch(f){return b}};for(var i="log,debug,info,warn,warning,error,critical,global,configure,scope,uncaughtError".split(","),j=0;j<i.length;++j)c.prototype[i[j]]=e(i[j]);var k="//d37gvrvc0wt4s1.cloudfront.net/js/v1.1/rollbar.min.js";_rollbarConfig.rollbarJsUrl=_rollbarConfig.rollbarJsUrl||k;var l=c.init(a,_rollbarConfig);l.loadFull(a,b,!1,_rollbarConfig)}(window,document);
  </script>
  <script type="text/javascript" async>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-30638158-4', 'auto');
    ga('send', 'pageview');
  </script>

</head>
<body class="">
  <div class="mmenu__wrapper">
    <div class="sidebar__wrapper sidebar__wrapper--sectionmenu">
  <div class="sidebar sidebar--narrow">
    <a href="/" class="sidebar__header">
      <span>pebble</span>
    </a>
    <ul class="mainmenu">
      <li class="mainmenu__item mainmenu__item--getting-started"><a href="/tutorials/"><span>Tutorials</span></a></li>
<li class="mainmenu__item mainmenu__item--sdk"><a href="/sdk/"><span>Get the SDK</span></a></li>
<li class="mainmenu__item mainmenu__item--guides active"><a href="/guides/"><span>Guides</span></a></li>
<li class="mainmenu__item mainmenu__item--docs"><a href="/docs/"><span>Documentation</span></a></li>
<li class="mainmenu__item mainmenu__item--examples"><a href="/examples/"><span>Examples</span></a></li>
<li class="mainmenu__item mainmenu__item--community"><a href="/community/"><span>Community</span></a></li>
<li class="mainmenu__item mainmenu__item--blog"><a href="/blog/"><span>Blog</span></a></li>
<li class="mainmenu__item mainmenu__item--more"><a href="/more/"><span>More</span></a></li>

    </ul>
    <div class="sidebar__legal">
      <a href="https://www.pebble.com/legal/privacy/" target="_blank">Privacy</a>
      <br>
      <a href="https://www.pebble.com/legal/cookies/" target="_blank">Cookies</a>
    </div>
    <a href="https://dev-portal.getpebble.com/" target="_blank" class="sidebar__footer">Publish</a>
  </div>
  <div class="section-menu section-menu--guides section-menu--light">
    <div class="section-menu__header">
      <h3><a href="/guides/">Guides</a></h3>
    </div>
    <ul>
      <li class="section-menu__item">
        <a href="/guides/toc/">Table of Contents</a>
      </li>




        <li class="section-menu__item">
          <a href="/guides/app-resources/">

            App Resources
          </a>

        </li>




        <li class="section-menu__item">
          <a href="/guides/appstore-publishing/">

            Appstore Publishing
          </a>

        </li>




        <li class="section-menu__item">
          <a href="/guides/best-practices/">

            Best Practices
          </a>

        </li>




        <li class="section-menu__item open">
          <a href="/guides/communication/">

            Communication
          </a>

            <ul>




                <li class="section-menu__subitem">
                  <a href="/guides/communication/advanced-communication/"><span>Advanced Communication</span></a>
                </li>





                <li class="section-menu__subitem active">
                  <a href="/guides/communication/datalogging/"><span>Datalogging</span></a>
                </li>



                <li class="section-menu__subitem">
                  <a href="/guides/communication/using-pebblekit-android/"><span>PebbleKit Android</span></a>
                </li>



                <li class="section-menu__subitem">
                  <a href="/guides/communication/using-pebblekit-js/"><span>PebbleKit JS</span></a>
                </li>



                <li class="section-menu__subitem">
                  <a href="/guides/communication/using-pebblekit-ios/"><span>PebbleKit iOS</span></a>
                </li>



                <li class="section-menu__subitem">
                  <a href="/guides/communication/sending-and-receiving-data/"><span>Sending and Receiving Data</span></a>
                </li>



                <li class="section-menu__subitem">
                  <a href="/guides/communication/using-the-sports-api/"><span>Sports API</span></a>
                </li>



            </ul>

        </li>




        <li class="section-menu__item">
          <a href="/guides/debugging/">

            Debugging
          </a>

        </li>




        <li class="section-menu__item">
          <a href="/guides/design-and-interaction/">

            Design and Interaction
          </a>

        </li>




        <li class="section-menu__item">
          <a href="/guides/events-and-services/">

            Events and Services
          </a>

        </li>




        <li class="section-menu__item">
          <a href="/guides/graphics-and-animations/">

            Graphics and Animations
          </a>

        </li>




        <li class="section-menu__item">
          <a href="/guides/migration/">

            Migrating Older Apps
          </a>

        </li>




        <li class="section-menu__item">
          <a href="/guides/pebble-packages/">

            Pebble Packages
          </a>

        </li>




        <li class="section-menu__item">
          <a href="/guides/pebble-timeline/">

            Pebble Timeline
          </a>

        </li>




        <li class="section-menu__item">
          <a href="/guides/rocky-js/">

            Rocky.js
          </a>

        </li>




        <li class="section-menu__item">
          <a href="/guides/smartstraps/">

            Smartstraps
          </a>

        </li>




        <li class="section-menu__item">
          <a href="/guides/tools-and-resources/">

            Tools and Resources
          </a>

        </li>




        <li class="section-menu__item">
          <a href="/guides/user-interfaces/">

            User Interfaces
          </a>

        </li>

    </ul>
  </div>
</div><!-- sidebar__wrapper -->
<div class="content content--section-menu">
  <div class="search">
  <a  href="javascript:void(0);" class="mobile-nav__hamburger js-mobile-nav-toggle"><i class="fa fa-reorder"></i></a>
  <i class="fa fa-lg fa-search search__icon"></i><input type="search" id="quicksearch" placeholder="Search Developer Site">
</div>
<div class="quicksearch" style="display: none;" id="quicksearch__results"></div>
<div id="search__blackout" style="display: none;"></div>

  <div class="container">

<div class="visible-m visible-s visible-xs row">
  <div class="col-xs-12">
    <div class="form__group">
      <div class="select-style no-label">
        <select class="js-toc-select">

            <option value="collecting-data">Collecting Data</option>

            <option value="creating-a-session">- Creating a Session</option>

            <option value="logging-data">- Logging Data</option>

            <option value="finishing-a-session">- Finishing a Session</option>

            <option value="receiving-data">Receiving Data</option>

            <option value="with-pebblekit-android">- With PebbleKit Android</option>

            <option value="with-pebblekit-ios">- With PebbleKit iOS</option>

            <option value="special-considerations-for-ios-apps">- Special Considerations for iOS Apps</option>

        </select>
      </div>
    </div>
  </div>
</div>


<div class="row">
  <div class="col-l-8 col-m-12">
    <h1 class="pagetitle">Datalogging</h1>

<!--

 -->
    <div class="markdown markdown--staff">

    <p>In addition to the more realtime <a href="/docs/c/Foundation/AppMessage/" title="AppMessage" class="link--docs"><code>AppMessage</code></a> API, the Pebble SDK also
includes the <a href="/docs/c/Foundation/DataLogging/" title="DataLogging" class="link--docs"><code>Datalogging</code></a> API. This is useful for applications where data can
be sent in batches at time intervals that make the most sense (for example, to
save battery power by allowing the watch to spend more time sleeping).</p><p>Datalogging also allows upto 640 kB of data to be buffered on the watch until a
connection is available, instead of requiring a connection be present at all
times. If data is logged while the watch is disconnected, it will be transferred
to the Pebble mobile app in batches for processing at the next opportunity. The
data is then passed on to any
<a href="/guides/communication/using-pebblekit-android/"><em>PebbleKit Android</em></a> or
<a href="/guides/communication/using-pebblekit-ios/"><em>PebbleKit iOS</em></a> companion
app that wishes to process it.</p><h2 id="collecting-data" class="anchor">Collecting Data</h2><p>Datalogging can capture any values that are compatible with one of the
<a href="/docs/c/Foundation/DataLogging/#DataLoggingItemType" title="DataLoggingItemType" class="link--docs"><code>DataLoggingItemType</code></a> <code>enum</code> (byte array, unsigned integer, and integer)
values, with common sources including accelerometer data or compass data.</p><h3 id="creating-a-session" class="anchor">Creating a Session</h3><p>Data is logged to a &#39;session&#39; with a unique identifier or tag, which allows a
single app to have multiple data logs for different types of data. First, define
the identifier(s) that should be used where appropriate:</p><div class="highlight"><pre><span class="c1">// The log's ID. Only one required in this example</span>
<span class="cp">#define TIMESTAMP_LOG 1</span>
</pre></div><p>Next, a session must first be created before any data can be logged to it. This
should be done during app initialization, or just before the first time an app
needs to log some data:</p><div class="highlight"><pre><span class="c1">// The session reference variable</span>
<span class="k">static</span> <span class="n">DataLoggingSessionRef</span> <span class="n">s_session_ref</span><span class="p">;</span>
</pre></div><div class="highlight"><pre><span class="k">static</span> <span class="kt">void</span> <span class="nf">init</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// Begin the session</span>
  <span class="n">s_session_ref</span> <span class="o">=</span> <span class="n">data_logging_create</span><span class="p">(</span><span class="n">TIMESTAMP_LOG</span><span class="p">,</span> <span class="n">DATA_LOGGING_INT</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">),</span> <span class="nb">true</span><span class="p">);</span>

  <span class="cm">/* ... */</span>
<span class="p">}</span>
</pre></div>
<blockquote>
<p>Note: The final parameter of <a href="/docs/c/Foundation/DataLogging/#data_logging_create" title="data_logging_create" class="link--docs"><code>data_logging_create()</code></a> allows a previous log
session to be continued, instead of starting from screatch on each app launch.</p></blockquote>
<h3 id="logging-data" class="anchor">Logging Data</h3><p>Once the log has been created or resumed, data collection can proceed. Each call
to <a href="/docs/c/Foundation/DataLogging/#data_logging_log" title="data_logging_log" class="link--docs"><code>data_logging_log()</code></a> will add a new entry to the log indicated by the
<a href="/docs/c/Foundation/DataLogging/#DataLoggingSessionRef" title="DataLoggingSessionRef" class="link--docs"><code>DataLoggingSessionRef</code></a> variable provided. The success of each logging
operation can be checked using the <a href="/docs/c/Foundation/DataLogging/#DataLoggingResult" title="DataLoggingResult" class="link--docs"><code>DataLoggingResult</code></a> returned:</p><div class="highlight"><pre><span class="k">const</span> <span class="kt">int</span> <span class="n">value</span> <span class="o">=</span> <span class="mi">16</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">uint32_t</span> <span class="n">num_values</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

<span class="c1">// Log a single value</span>
<span class="n">DataLoggingResult</span> <span class="n">result</span> <span class="o">=</span> <span class="n">data_logging_log</span><span class="p">(</span><span class="n">s_session_ref</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">value</span><span class="p">,</span> <span class="n">num_values</span><span class="p">);</span>

<span class="c1">// Was the value successfully stored? If it failed, print the reason</span>
<span class="k">if</span><span class="p">(</span><span class="n">result</span> <span class="o">!=</span> <span class="n">DATA_LOGGING_SUCCESS</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">APP_LOG</span><span class="p">(</span><span class="n">APP_LOG_LEVEL_ERROR</span><span class="p">,</span> <span class="s">"Error logging data: %d"</span><span class="p">,</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">result</span><span class="p">);</span>
<span class="p">}</span>
</pre></div><h3 id="finishing-a-session" class="anchor">Finishing a Session</h3><p>Once all data has been logged or the app is exiting, the session must be
finished to signify that the data is to be either transferred to the connected
phone (if available), or stored for later transmission. </p><div class="highlight"><pre><span class="c1">// Finish the session and sync data if appropriate</span>
<span class="n">data_logging_finish</span><span class="p">(</span><span class="n">s_session_ref</span><span class="p">);</span>
</pre></div>
<blockquote>
<p>Note: Once a session has been finished, data cannot be logged to its
<a href="/docs/c/Foundation/DataLogging/#DataLoggingSessionRef" title="DataLoggingSessionRef" class="link--docs"><code>DataLoggingSessionRef</code></a> until it is resumed or began anew.</p></blockquote>
<h2 id="receiving-data" class="anchor">Receiving Data</h2>
<blockquote>
<p>Note: Datalogging data cannot be received via PebbleKit JS.</p></blockquote>
<p>Data collected with the <a href="/docs/c/Foundation/DataLogging/" title="DataLogging" class="link--docs"><code>Datalogging</code></a> API can be received and processed in a
mobile companion app using PebbleKit Android or PebbleKit iOS. This enables it
to be used in a wide range of general applications, such as detailed analysis of
accelerometer data for health research, or transmission to a third-party web
service.</p><h3 id="with-pebblekit-android" class="anchor">With PebbleKit Android</h3><p>PebbleKit Android allows collection of data by registering a
<code>PebbleDataLogReceiver</code> within your <code>Activity</code> or <code>Service</code>. When creating a
receiver, be careful to provide the correct UUID to match that of the watchapp
that is doing that data collection. For example:</p><div class="highlight"><pre><span class="c1">// The UUID of the watchapp</span>
<span class="kd">private</span> <span class="n">UUID</span> <span class="n">APP_UUID</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"64fcb54f-76f0-418a-bd7d-1fc1c07c9fc1"</span><span class="o">);</span>
</pre></div><p>Use the following overridden methods to collect data and determine when the
session has been finished by the watchapp. In the example below, each new
integer received represents the uptime of the watchapp, and is displayed in an
Android <code>TextView</code>:</p><div class="highlight"><pre><span class="c1">// Create a receiver to collect logged data</span>
<span class="n">PebbleKit</span><span class="o">.</span><span class="na">PebbleDataLogReceiver</span> <span class="n">dataLogReceiver</span> <span class="o">=</span>
        <span class="k">new</span> <span class="n">PebbleKit</span><span class="o">.</span><span class="na">PebbleDataLogReceiver</span><span class="o">(</span><span class="n">APP_UUID</span><span class="o">)</span> <span class="o">{</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">receiveData</span><span class="o">(</span><span class="n">Context</span> <span class="n">context</span><span class="o">,</span> <span class="n">UUID</span> <span class="n">logUuid</span><span class="o">,</span> <span class="n">Long</span> <span class="n">timestamp</span><span class="o">,</span>
                                                          <span class="n">Long</span> <span class="n">tag</span><span class="o">,</span> <span class="kt">int</span> <span class="n">data</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// super() (removed from IDE-generated stub to avoid exception)</span>

    <span class="n">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="n">TAG</span><span class="o">,</span> <span class="s">"New data for session "</span> <span class="o">+</span> <span class="n">tag</span> <span class="o">+</span> <span class="s">"!"</span><span class="o">);</span>

    <span class="c1">// Cumulatively add the new data item to a TextView's current text</span>
    <span class="n">String</span> <span class="n">current</span> <span class="o">=</span> <span class="n">dataView</span><span class="o">.</span><span class="na">getText</span><span class="o">().</span><span class="na">toString</span><span class="o">();</span>
    <span class="n">current</span> <span class="o">+=</span> <span class="n">timestamp</span><span class="o">.</span><span class="na">toString</span><span class="o">()</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">data</span>
                <span class="o">+</span> <span class="s">"s since watchapp launch.\n"</span><span class="o">;</span>
    <span class="n">dataView</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">current</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onFinishSession</span><span class="o">(</span><span class="n">Context</span> <span class="n">context</span><span class="o">,</span> <span class="n">UUID</span> <span class="n">logUuid</span><span class="o">,</span> <span class="n">Long</span> <span class="n">timestamp</span><span class="o">,</span>
                                                                    <span class="n">Long</span> <span class="n">tag</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="n">TAG</span><span class="o">,</span> <span class="s">"Session "</span> <span class="o">+</span> <span class="n">tag</span> <span class="o">+</span> <span class="s">" finished!"</span><span class="o">);</span>
  <span class="o">}</span>

<span class="o">};</span>

<span class="c1">// Register the receiver</span>
<span class="n">PebbleKit</span><span class="o">.</span><span class="na">registerDataLogReceiver</span><span class="o">(</span><span class="n">getApplicationContext</span><span class="o">(),</span> <span class="n">dataLogReceiver</span><span class="o">);</span>
</pre></div>
<div class="alert alert--fg-white alert--bg-dark-red">
<p><strong>Important</strong></p><p>If your Java IDE automatically adds a line of code to call super() when you
create the method, the code will result in an UnsupportedOperationException.
Ensure you remove this line to avoid the exception.</p>
</div>
<p>Once the <code>Activity</code> or <code>Service</code> is closing, you should attempt to unregister
the receiver. However, this is not always required (and will cause an exception
to be thrown if invoked when not required), so use a <code>try, catch</code> statement:</p><div class="highlight"><pre><span class="nd">@Override</span>
<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onPause</span><span class="o">()</span> <span class="o">{</span>
  <span class="kd">super</span><span class="o">.</span><span class="na">onPause</span><span class="o">();</span>

  <span class="k">try</span> <span class="o">{</span>
    <span class="n">unregisterReceiver</span><span class="o">(</span><span class="n">dataLogReceiver</span><span class="o">);</span>
  <span class="o">}</span> <span class="k">catch</span><span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">Log</span><span class="o">.</span><span class="na">w</span><span class="o">(</span><span class="n">TAG</span><span class="o">,</span> <span class="s">"Receiver did not need to be unregistered"</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div><h3 id="with-pebblekit-ios" class="anchor">With PebbleKit iOS</h3><p>The process of collecing data via a PebbleKit iOS companion mobile app is
similar to that of using PebbleKit Android. Once your app is a delegate of
<a href="/docs/pebblekit-ios/Protocols/PBDataLoggingServiceDelegate/" title="PBDataLoggingServiceDelegate" class="link--docs"><code>PBDataLoggingServiceDelegate</code></a> (see
<a href="/guides/communication/using-pebblekit-ios/"><em>PebbleKit iOS</em></a> for details),
simply register the class as a datalogging delegate:</p><div class="highlight"><pre><span class="c1">// Get datalogging data by becoming the delegate</span>
<span class="p">[[</span><span class="n">PBPebbleCentral</span> <span class="n">defaultCentral</span><span class="p">]</span>
                      <span class="nl">dataLoggingServiceForAppUUID</span><span class="p">:</span><span class="n">myAppUUID</span><span class="p">].</span><span class="n">delegate</span> <span class="o">=</span> <span class="nb">self</span><span class="p">;</span>
</pre></div><p>Being a datalogging delegate allows the class to receive two additional
<a href="/docs/pebblekit-ios/Protocols/PBDataLoggingServiceDelegate/" title="" class="">callbacks</a> for when new data
is available, and when the session has been finished by the watch. Implement
these callbacks to read the new data:</p><div class="highlight"><pre><span class="p">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">dataLoggingService:</span><span class="p">(</span><span class="n">PBDataLoggingService</span> <span class="o">*</span><span class="p">)</span><span class="nv">service</span>
              <span class="nf">hasSInt32s:</span><span class="p">(</span><span class="k">const</span> <span class="kt">SInt32</span> <span class="p">[])</span><span class="nv">data</span>
           <span class="nf">numberOfItems:</span><span class="p">(</span><span class="kt">UInt16</span><span class="p">)</span><span class="nv">numberOfItems</span>
              <span class="nf">forDataLog:</span><span class="p">(</span><span class="n">PBDataLoggingSessionMetadata</span> <span class="o">*</span><span class="p">)</span><span class="nv">log</span> <span class="p">{</span>
  <span class="n">NSLog</span><span class="p">(</span><span class="s">@"New data received!"</span><span class="p">);</span>

  <span class="c1">// Append newest data to displayed string</span>
  <span class="bp">NSString</span> <span class="o">*</span><span class="n">current</span> <span class="o">=</span> <span class="nb">self</span><span class="p">.</span><span class="n">dataView</span><span class="p">.</span><span class="n">text</span><span class="p">;</span>
  <span class="bp">NSString</span> <span class="o">*</span><span class="n">newString</span> <span class="o">=</span> <span class="p">[</span><span class="bp">NSString</span> <span class="nl">stringWithFormat</span><span class="p">:</span><span class="s">@"New item: %d"</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]];</span>
  <span class="n">current</span> <span class="o">=</span> <span class="p">[</span><span class="n">current</span> <span class="nl">stringByAppendingString</span><span class="p">:</span><span class="n">newString</span><span class="p">];</span>
  <span class="nb">self</span><span class="p">.</span><span class="n">dataView</span><span class="p">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">current</span><span class="p">;</span>

  <span class="k">return</span> <span class="nb">YES</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">dataLoggingService:</span><span class="p">(</span><span class="n">PBDataLoggingService</span> <span class="o">*</span><span class="p">)</span><span class="nv">service</span>
            <span class="nf">logDidFinish:</span><span class="p">(</span><span class="n">PBDataLoggingSessionMetadata</span> <span class="o">*</span><span class="p">)</span><span class="nv">log</span> <span class="p">{</span>
  <span class="n">NSLog</span><span class="p">(</span><span class="s">@"Finished data log: %@"</span><span class="p">,</span> <span class="n">log</span><span class="p">);</span>
<span class="p">}</span>
</pre></div><h3 id="special-considerations-for-ios-apps" class="anchor">Special Considerations for iOS Apps</h3>
<ul>
<li><p>The logic to deal with logs with the same type of data (i.e., the same
tag/type) but from different sessions (different timestamps) must be created
by the developer using the delegate callbacks.</p></li>
<li><p>To check whether the data belongs to the same log or not, use <code>-isEqual:</code> on
<code>PBDataLoggingSessionMetadata</code>. For convenience,
<code>PBDataLoggingSessionMetadata</code> can be serialized using <code>NSCoding</code>.</p></li>
<li><p>Using multiple logs in parallel (for example to transfer different kinds of
information) will require extra logic to re-associate the data from these
different logs, which must also be implemented by the developer.</p></li>
</ul>

    </div>

    <a id="comments" class="anchor"></a>
    <div id="disqus_thread" aria-live="polite" data-post-url="https://developer.getpebble.com/guides/communication/datalogging/">
      You need JavaScript enabled to read and post comments.
    </div>


  </div>

    <div class="col-m-4 hidden-s hidden-xs hidden-m">
      <div class="gray-box gray-box--fixed gray-box--scrollspy">

  <h3>Overview</h3>
  <ul class="toc">

      <li class="toc__item toc__item--level1"><a href="#collecting-data">Collecting Data</a></li>

      <li class="toc__item toc__item--level2"><a href="#creating-a-session">Creating a Session</a></li>

      <li class="toc__item toc__item--level2"><a href="#logging-data">Logging Data</a></li>

      <li class="toc__item toc__item--level2"><a href="#finishing-a-session">Finishing a Session</a></li>

      <li class="toc__item toc__item--level1"><a href="#receiving-data">Receiving Data</a></li>

      <li class="toc__item toc__item--level2"><a href="#with-pebblekit-android">With PebbleKit Android</a></li>

      <li class="toc__item toc__item--level2"><a href="#with-pebblekit-ios">With PebbleKit iOS</a></li>

      <li class="toc__item toc__item--level2"><a href="#special-considerations-for-ios-apps">Special Considerations for iOS Apps</a></li>

  </ul>



          <h3>Examples</h3>
          <ul>

            <li><a href="" target="_blank">Tricorder</a></li>

            <li><a href="https://github.com/pebble-examples/tricorder" target="_blank"></a></li>

          </ul>

      </div>
    </div>

</div>

  </div>
</div>


  </div>
  <script type="text/javascript">
    var searchPrimary = '';
  </script>

  <script type="text/javascript" src="/developer.pebble.com/assets/js/libs-ce98da7b5eecc97f976a3cad8e665a31.js"></script>

  <script type="text/javascript" src="/developer.pebble.com/assets/js/templates.js"></script>
  <script type="text/javascript" src="/developer.pebble.com/assets/js/app.js"></script>
  <script type="text/javascript" src="/developer.pebble.com/assets/js/search.js"></script>
  <script type="text/javascript" src="/developer.pebble.com/assets/js/quicksearch.js"></script>
  <script type="text/javascript" src="/developer.pebble.com/assets/js/disqus.js"></script>

</body>
</html>
